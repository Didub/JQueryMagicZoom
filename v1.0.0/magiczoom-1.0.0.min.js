!function(o){o.fn.magicZoom=function(e){var n,i,t,a,m,r,c,s,l=o.extend({cursor:"crosshair",allowzoom:!1,minzoom:2,maxzoom:8},e),u=this,g=u.attr("src"),d=l.minzoom,p={init:function(){n=u.width(),i=u.height()},styleElements:function(){var e=p.generateRandomId();(o("#magiczoom-wrapper"+e).length>=1||o("#magiczoom-zoom"+e).length>=1)&&(e=p.generateRandomId()),u.wrap("<div id='magiczoom-wrapper"+e+"'></div>"),a=o("#magiczoom-wrapper"+e),m=a.offset(),a.css({position:"relative",cursor:l.cursor,display:"-moz-inline-stack",display:"inline-block",verticalAlign:"top",maxWidth:"100%",zoom:1}),a.append("<div id='magiczoom-zoom"+e+"'></div>"),r=o("#magiczoom-zoom"+e),r.css({position:"absolute",top:"0",width:"100%",height:"100%",backgroundImage:"url("+g+")",backgroundSize:2*n+"px "+2*i+"px",backgroundRepeat:"no-repeat",display:"none"}),u.hasClass("img-circle")&&r.addClass("img-circle")},setupEvents:function(){a.on({mouseenter:function(o){m=a.offset(),d=l.minzoom,t=l.minzoom-1,p.zoomImage(o,d),r.show()},mouseleave:function(){r.hide()},mousemove:function(o){p.moveImage(o)},touchstart:function(o){o.preventDefault(),m=a.offset(),d=l.minzoom,t=l.minzoom-1,p.zoomImage(o,d),r.show()},touchend:function(){r.hide()},touchmove:function(o){o.preventDefault();var e=o.originalEvent.touches[0].pageX,t=o.originalEvent.touches[0].pageY;e<=0+m.left||e>=n+m.left||t<=0+m.top||t>=i+m.top?r.hide():p.moveImage(o.originalEvent.touches[0])},touchleave:function(){r.hide()},mousewheel:function(o){1==l.allowzoom&&(o.preventDefault(),o.originalEvent.wheelDelta/120>0?d!=l.maxzoom&&(t++,d++,p.zoomImage(o,d)):d!=l.minzoom&&(t--,d--,p.zoomImage(o,d)))},DOMMouseScroll:function(o){o.preventDefault(),1==l.allowzoom&&(o.originalEvent.detail<0?d!=l.maxzoom&&(t++,d++,p.zoomImage(o.originalEvent,d)):d!=l.minzoom&&(t--,d--,p.zoomImage(o.originalEvent,d)))}})},moveImage:function(o){c=-o.pageX*t+m.left*t,s=-o.pageY*t+m.top*t,r.css({backgroundPosition:c+"px "+s+"px"})},zoomImage:function(o,e){r.css({backgroundSize:n*e+"px "+i*e+"px"}),p.moveImage(o)},generateRandomId:function(){for(var o="",e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=0;6>n;n++)o+=e.charAt(Math.floor(Math.random()*e.length));return o}},z={onLoad:function(){p.init(),p.styleElements(),p.setupEvents()},onResize:function(){p.init()}};o(window).load(z.onLoad),o(window).resize(z.onResize)}}(jQuery);